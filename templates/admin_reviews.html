{% extends "base.html" %}
{% block content %}

<div class="admin-review-header">
    <h1>Manage Review Images</h1>
    <a class="btn secondary" href="{{ url_for('reviews_page') }}">View Public Page</a>
</div>

{% if error %}
    <div class="alert">{{ error }}</div>
{% endif %}

<form class="form" method="post" action="{{ url_for('admin_reviews_upload') }}" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <label>Upload review screenshot (PNG/JPG/WEBP, max 8MB)
        <input type="file" name="image" accept=".png,.jpg,.jpeg,.webp" requrired>
    </label>
    <button class="btn" type="submit">Upload</button>
</form>

<hr>

{% if images|length == 0 %}
    <p>No images uploaded yet.</p>
{% else %}
    <h2>Uploaded Images</h2>
    <div class="review-grid">
        {% for img in images %}
            <div class="review-card">
                <div class="review-media">
                    <img src="{{ url_for('static', filename='uploads/reviews/' ~ img) }}" alt="Review screenshot">
                </div>

                <div class="review-form">
                    <form method="post" action="/admin/reviews/delete/{{ img }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button class="btn tiny" type="submit">Delete</button>
                    </form>
                </div>
            </div>

        {% endfor %}
    </div>
{% endif %}
{% endblock %}